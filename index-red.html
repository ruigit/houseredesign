<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width = device-width, initial-scale = 1.0, maximum-scale = 1.0, user-scalable = 0"/>
    <meta name="x5-orientation" content="portrait"/>
    <meta name="screen-orientation" content="portrait"/>
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta content="black" name="apple-mobile-web-app-status-bar-style">
    <meta content="telephone=no" name="format-detection">
    <meta name="format-detection" content="email=no"/>
    <meta name="keywords" content="关键字">
    <meta name="description" content="描述">
    <link href="favicon.ico" rel="shortcut icon">
    <title>灯泡找房</title>
    <link rel="stylesheet" href="css/reset.css"/>
    <link rel="stylesheet" href="css/style.css"/>
    <script type="text/javascript" src="js/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="js/rem.js"></script>
    <script type="text/javascript" src="js/fastclick.js"></script>
    <link rel="stylesheet" href="css/mobileSelect.css"/>
    <script type="text/javascript" src="js/mobileSelect-red.min.js"></script>
    <script>
        //阻止穿透事件
        $(function(){
            new
            FastClick(document.body);
        })
        $(document).ready(function() {
            //		背景高度
            var winHeight = window.innerHeight + $(".search-nav").height();
            var bodyheight = $(".caidan-line").height() + $(".search-nav").height();
            var winHei = window.innerHeight - $(".search-nav").height();
            $(".index-map").css({height: winHei});
            if (winHeight > bodyheight){
                $(".caidan-line").css({height: winHeight});
            }else {
                $(".caidan-line").css({height: bodyheight});
            }
//            侧边导航
            $(".caidan").on("click", function(){
//                $(".caidan-line").animate({left: '0'}, 800);

                $(".caidan-line").removeClass("showleftnav-r");
                $(".caidan-line").toggleClass("showleftnav");
                $(".map-content").removeClass("showleftnav-yr");
                //                解绑移动事件
                // $('.search-content').unbind('touchmove');
//                禁止移动
               $('.search-content').on("touchmove",function(e){
                   e.preventDefault();
               });

            })
            $(".cha").on("click", function(){
//                $(".caidan-line").animate({left: '-100%'}, 800);
                $(".caidan-line").removeClass("showleftnav");
                $(".caidan-line").toggleClass("showleftnav-r");
//                解绑移动事件
               $('.search-content').unbind('touchmove');
            })
            // 模拟点击
            $(".index-map").on("click", function(){
                $(".map-content").removeClass("showleftnav-y");
                $(".map-content").addClass("showleftnav-yr");
                $(".caidan-line").removeClass("showleftnav");
                //                解绑移动事件
                // $('body').unbind('touchmove');
                //                禁止移动
                $('.search-content').on("touchmove",function(e){
                    e.preventDefault();
                });

            })
            $(".map-search").on("click", function(){
                //                解绑移动事件
                $('.search-content').unbind('touchmove');
                $(".map-content").removeClass("showleftnav-yr");
                $(".map-content").addClass("showleftnav-y");

            })
            //            房源面积

            $("#area").on("click", function () {
//                $(".masking").animate({bottom: '0'}, 800);
//                $(".area").animate({bottom: '0'}, 800);
                $(".masking").removeClass("showleftnav-yf");
                $(".masking").toggleClass("showleftnav-yrf");
                $(".area").removeClass("showleftnav-y");
                $(".area").toggleClass("showleftnav-yr");
                $(".area p").removeClass();
                //                禁止移动
//                $('body').on("touchmove",function(e){
//                    e.preventDefault();
//                });
            })

            //area确定
            $(".area p").on("click", function () {
                $(".area p").removeClass().addClass("areabj");

            })

            $(".dater").on("click", function () {
                var areanum = parseInt($(".chose-input-num").val());
                var areanumlast = parseInt($(".chose-input-num-last").val());
                var areaall = $(".area p").html();
                var areadat = $(".chose-input-num").val() + ' ~ ' + $(".chose-input-num-last").val();
//                        $(".masking").animate({bottom: '-100%'}, 800);
//                        $(".area").animate({bottom: '-40%'}, 800);
                if($(".area p").is('.areabj')){
                    $(".masking").removeClass("showleftnav-yrf");
                    $(".masking").toggleClass("showleftnav-yf");
                    $(".area").removeClass("showleftnav-yr");
                    $(".area").toggleClass("showleftnav-y");
                    $(".chose-input-num").val() == "";
                    $(".chose-input-num-last").val() == "";
                    $(".area-val").empty().append(areaall);
                }else if( $(".chose-input-num").val() == "" && $(".chose-input-num-last").val() == ""){
                    $(".area p").removeClass();
                    alert("请输入面积");
                }else if( areanum >= areanumlast ){
                    $(".area p").removeClass();
                    alert("请输入正确的范围");
                }else {
                    $(".area p").removeClass();
                    $(".masking").removeClass("showleftnav-yrf");
                    $(".masking").toggleClass("showleftnav-yf");
                    $(".area").removeClass("showleftnav-yr");
                    $(".area").toggleClass("showleftnav-y");

                    $(".area-val").empty().append(areadat);

                    //                解绑移动事件
//                        $('body').unbind('touchmove');
                }

            })
//            点击遮罩层关闭
            $(".masking").on("click", function () {
                $(".area ,.price ,.room").removeClass("showleftnav-yr");
                $(".masking").removeClass("showleftnav-yrf");
                $(".area ,.price ,.room").toggleClass("showleftnav-ymf");
            })



            //            房源面积end
            //            价位
            $("#price").on("click", function () {
//                $(".masking").animate({bottom: '0'}, 800);
//                $(".price").animate({bottom: '0'}, 800);
                $(".masking").removeClass("showleftnav-yf");
                $(".masking").toggleClass("showleftnav-yrf");
                $(".price").removeClass("showleftnav-y");
                $(".price").toggleClass("showleftnav-yr");
                //                禁止移动
//                $('body').on("touchmove",function(e){
//                    e.preventDefault();
//                });
                $(".price p").removeClass();

            })
//                加减
            $(".jia").on("click",function(){
                var n=$(".price-chose-input-num").val();
                if(!isNaN(parseInt(n))){
                    var numk=parseInt(n)+1;
                    if(numk==0){alert("不能为0!");}
                    $(".price-chose-input-num").prop("value",numk);
                }
            });
            $(".jian").on("click",function(){
                var ni=$(".price-chose-input-num").val();
                if(!isNaN(parseInt(ni))){
                    var num=parseInt(ni)-1;
                    if(num==0){alert("不能为0!"); return}
                    $(".price-chose-input-num").prop("value",num);
                }
            });
            $(".jia1").on("click",function(){
                var nl=$(".price-chose-input-num-last").val();
                if(!isNaN(parseInt(nl))){
                    var numkl=parseInt(nl)+1;
                    if(numkl==0){alert("不能为0!");}
                    $(".price-chose-input-num-last").prop("value",numkl);
                }
            });
            $(".jian1").on("click",function(){
                var nil=$(".price-chose-input-num-last").val();
                if(!isNaN(parseInt(nil))){
                    var numl=parseInt(nil)-1;
                    if(numl==0){alert("不能为0!"); return}
                    $(".price-chose-input-num-last").prop("value",numl);
                }
            });
            //price确定
            $(".price p").on("click", function () {
                $(".price p").removeClass().addClass("pricebj");
                $(".price-chose-input-num").val("全部");
                $(".price-chose-input-num-last").val("全部");
            })
            $(".price-dater").on("click", function () {
                var pricenum = parseInt($(".price-chose-input-num").val());
                var pricenumlast = parseInt($(".price-chose-input-num-last").val());
                var priceall = $(".price p").html();
                var pricedat = $(".price-chose-input-num").val() + ' ~ ' + $(".price-chose-input-num-last").val();
                if($(".price p").is('.pricebj')){
                    $(".masking").removeClass("showleftnav-yrf");
                    $(".masking").toggleClass("showleftnav-yf");
                    $(".price").removeClass("showleftnav-yr");
                    $(".price").toggleClass("showleftnav-y");
                    $(".price-chose-input-num").val("");
                    $(".price-chose-input-num-last").val("");
                    $(".price-val").empty().append(priceall);
                }else if( $(".price-chose-input-num").val() == "" && $(".price-chose-input-num-last").val() == ""){
                    $(".price p").removeClass();
                    alert("请输入价格");
                }else if( pricenum >= pricenumlast ){
                    $(".price p").removeClass();
                    alert("请输入正确的范围");
                }else {
//                        $(".masking").animate({bottom: '-100%'}, 800);
//                        $(".price").animate({bottom: '-40%'}, 800);
                    $(".price p").removeClass();
                    $(".masking").removeClass("showleftnav-yrf");
                    $(".masking").toggleClass("showleftnav-yf");
                    $(".price").removeClass("showleftnav-yr");
                    $(".price").toggleClass("showleftnav-y");
                    $(".price-val").empty().append(pricedat);
                    //                解绑移动事件
//                        $('body').unbind('touchmove');
                }

            })



            //            价位end
            //            房源厅室
            $("#room").on("click", function () {
//                $(".masking").animate({bottom: '0'}, 800);
//                $(".toward").animate({bottom: '0'}, 800);
                $(".masking").removeClass("showleftnav-yf");
                $(".masking").toggleClass("showleftnav-yrf");
                $(".room").removeClass("showleftnav-y");
                $(".room").toggleClass("showleftnav-yr");
//                $(".toward-chose dl").scroll(function() {
//
//                });
                $(".room-ting ul li").on("click", function () {
                    $(this).addClass("roting room-chose-blue").siblings().removeClass("roting room-chose-blue");
                })
                $(".room-shi ul li").on("click", function () {
                    $(this).addClass("roshi room-chose-blue").siblings().removeClass("roshi room-chose-blue");
                })
            })
            $(".room-dater").on("click", function () {
                var roomnum = $(".roting").html();
                var roomnumlast = $(".roshi").html();
                var roomdat = $(".roting").html() + ' ~ ' + $(".roshi").html();
//                $(".masking").animate({bottom: '-100%'}, 800);
//                $(".toward").animate({bottom: '-40%'}, 800);
                $(".masking").removeClass("showleftnav-yrf");
                $(".masking").toggleClass("showleftnav-yf");
                $(".room").removeClass("showleftnav-yr");
                $(".room").toggleClass("showleftnav-y");
                if( roomnum =="全部" && roomnumlast =="全部" ){
                    $(".room-val").empty().append("全部");
                }else {
                    $(".room-val").empty().append(roomdat);
                }
            })
//            房源朝向
            var mobileSelect1 = new MobileSelect({
                trigger: '#toward',
                title: '朝向',
                triggerDisplayData: false,
                wheels: [
                    {data:['全部','东','东南','北','东北','南','西南','西','西北']}
                ],
                position:[3], //初始化定位
                onShow:function(){
                    if($(".selectLine").html() == "to"){
                        $(".selectLine").empty();
                    }
                },
                onHide:function(){
                    $(".selectLine").empty();
                },
                callback:function(indexArr, data){
                    $(".toward-val").empty().append(data);
                }
            });
            //            房源楼层
            var mobileSelect2 = new MobileSelect({
                trigger: '#floor',
                title: '编辑筛选的房源楼层',
                floor: 'to',
                triggerDisplayData: false,
//                wheels: [
//                    {data:['1F','2F','3F','4F','5F','6F','7F','8F','9F','10F','11F','12F','13F','14F','15F','16F','17F','18F','19F','20F','21F','22F','23F','24F','25F','26F','27F','28F','29F','30F','31F','32F']},
//                    {data:['1F','2F','3F','4F','5F','6F','7F','8F','9F','10F','11F','12F','13F','14F','15F','16F','17F','18F','19F','20F','21F','22F','23F','24F','25F','26F','27F','28F','29F','30F','31F','32F']}
//                ],
                wheels:[
                    {data:[
                        {id:'1',value:'全部'},
                        {
                            id:'2',
                            value:'1F',
                            childs:[
                                {id:'1',value:'2F'},
                                {id:'2',value:'3F'},
                                {id:'3',value:'4F'},
                                {id:'4',value:'5F'},
                                {id:'5',value:'6F'}
                            ]
                        },
                        {
                            id:'3',
                            value:'2F',
                            childs:[
                                {id:'1',value:'3F'},
                                {id:'2',value:'4F'},
                                {id:'3',value:'5F'},
                                {id:'4',value:'6F'},
                                {id:'5',value:'7F'}
                            ]
                        },
                        {
                            id:'4',
                            value:'3F',
                            childs:[
                                {id:'1',value:'4F'},
                                {id:'2',value:'5F'},
                                {id:'3',value:'6F'},
                                {id:'4',value:'7F'},
                                {id:'5',value:'8F'}
                            ]
                        },
                        {
                            id:'5',
                            value:'4F',
                            childs:[
                                {id:'1',value:'5F'},
                                {id:'2',value:'6F'},
                                {id:'3',value:'7F'},
                                {id:'4',value:'8F'},
                                {id:'5',value:'9F'}
                            ]
                        },
                        {
                            id:'6',
                            value:'5F',
                            childs:[
                                {id:'1',value:'6F'},
                                {id:'2',value:'7F'},
                                {id:'3',value:'8F'},
                                {id:'4',value:'9F'},
                                {id:'5',value:'10F'}
                            ]
                        },
                    ]}
                ],
                position:[2,0], //初始化定位
                onShow:function(){
                    if($(".floor-val").html() == "全部"){
                        $(".selectLine").empty();

                    }else{
                        $(".selectLine").html("to");

                    }
                },
                onHide:function(){
                    $(".selectLine").empty();
                },
                transitionEnd:function(indexArr, data) {
                    for (var i=0;i<data.length;i++) {
                        if(data[i].value == '全部'){
                            $(".selectLine").empty();
                            break;
                        }else{
                            $(".selectLine").html("to");
                            break;
                        }
                    }
                },
                callback:function(indexArr, data) {
                    for (var i=0;i<data.length;i++) {
                        if(data[i].value == '全部'){
                            $(".floor-val").empty().append(data[i].value);
                            break;
                        }else{
                            $(".floor-val").empty().append(data[i++].value + ' ~ ' + data[i].value);
                            break;
                        }
                    }
                }
            });
//            异步获取房源楼层json数据
//            $.ajax({
//                type: "POST",
//                url: "",
//                data: {},
//                dataType: "json",
//                success: function(res){
//                    //这里假设获取到的res.data为：
//                    // [{
//                    //     id:'1',
//                    //     value:'更新后数据',
//                    //     childs:[
//                    //         {id:'A1',value:'apple'},
//                    //         {id:'A2',value:'banana'},
//                    //         {id:'A3',value:'orange'}
//                    //     ]
//                    // }]
//                    mobileSelect2.updateWheels(res.data);
//                }
//            });
        })
    </script>
</head>
<body>
<div class="search-content">
    <div class="search-nav search-nav-red">
        <i class="iconfont icon-category caidan"></i>
        <div class="index-location-search">
            <i class="iconfont icon-icon location3"></i>
            <img src="img/logowhite.png">
            <i class="iconfont icon-search fangdajing"></i>
            <div class="clearfix"></div>
        </div>
        <i class="iconfont icon-form formm"></i>
        <div class="clearfix"></div>
    </div>
    <div class="index-map">模拟</div>

</div>
</body>
</html>
<div class="caidan-line">
    <div class="caidan-line-1">
        <dl>
            <dt>
                <img src="img/logoyellow.png">
                <i class="iconfont icon-close cha"></i>
            </dt>
            <dt class="bordertop color-tap-red"><p>新房</p></dt>
            <dt><p>二手房</p></dt>
            <dt><p>租房</p></dt>
            <dt><p>公建商铺</p></dt>
            <dt><p>找经纪人</p></dt>
        </dl>
    </div>
    <div class="caidan-line-2">
        <dl>
            <dt id="area"><p>面积</p><span class="area-val">全部 ></span><div  class="clearfix"></div></dt>
            <dt id="toward"><p>朝向</p><span class="toward-val">全部 ></span><div  class="clearfix"></div></dt>
            <dt id="room"><p>厅室</p><span class="room-val">全部 ></span><div  class="clearfix"></div></dt>
            <dt id="floor"><p>楼层</p><span class="floor-val">全部 ></span><div  class="clearfix"></div></dt>
            <dt id="price"><p>价位</p><span class="price-val">全部 ></span><div  class="clearfix"></div></dt>
        </dl>
    </div>
    <div class="caidan-line-3">
        我的收藏
    </div>
</div>
<div class="masking"></div>
<div class="area area-red">
    <div class="area-title area-title-red">面积</div>

    <div class="chose">
        <div class="chose-input">
            <input type="text" class="chose-input-num" value="">
            <span>m²</span>
            <div class="clearfix"></div>
        </div>
        <div class="chose-input-ful">
            <i class="iconfont icon-subtract shafadhen"></i>
        </div>
        <div class="chose-input">
            <input type="text" class="chose-input-num-last" value="">
            <span>m²</span>
            <div class="clearfix"></div>
        </div>
        <div class="clearfix"></div>
    </div>
    <p>全部</p>
    <div class="dater dater-red">确定</div>
</div>
<div class="room">
    <div class="room-title">编辑筛选的房源厅室</div>
    <div class="room-chose">
        <dl>
            <dt class="room-ting">
                <ul>
                    <div class="ro-tingd"> <i class="iconfont icon-shafa shafad"></i></div>
                    <li class="roting room-chose-blue">全部</li>
                    <li>1</li>
                    <li>2</li>
                    <li>3</li>
                    <li>4</li>
                    <li>5</li>
                    <div class="clearfix"></div>
                </ul>
            </dt>
            <dt class="room-shi">
                <ul>
                    <div class="ro-tingd"> <i class="iconfont icon-zhinengchuang-f chuangd"></i></div>
                    <li class="roshi room-chose-blue">全部</li>
                    <li>1</li>
                    <li>2</li>
                    <li>3</li>
                    <li>4</li>
                    <li>5</li>
                    <div class="clearfix"></div>
                </ul>
            </dt>
        </dl>
    </div>
    <div class="room-dater">确定</div>
</div>
<div class="price area-red">
    <div class="price-title area-title-red">价位</div>

    <div class="price-chose">
        <div class="price-chose-input">
            <i class="iconfont icon-subtract subtract jian"></i>
            <input type="text" class="price-chose-input-num" value="">
            <i class="iconfont icon-add adds jia"></i>
            <div class="clearfix"></div>
        </div>
        <div class="price-chose-input-ful">
            <i class="iconfont icon-subtract shafadhen"></i>
        </div>
        <div class="price-chose-input">
            <i class="iconfont icon-subtract subtract jian1"></i>
            <input type="text" class="price-chose-input-num-last" value="">
            <i class="iconfont icon-add adds jia1"></i>
            <div class="clearfix"></div>
        </div>
        <div class="clearfix"></div>
    </div>
    <p>全部</p>
    <div class="price-dater dater-red">确定</div>
</div>
<div class="map-content">
    <div class="map-search">
        <p>中海社区4号楼</p><span>当前在售房源3套</span><i class="iconfont icon-close map-search-close"></i><div class="clearfix"></div>
    </div>
    <div class="search-chose">
        <ul>
            <li><p>地区选择</p><div class="clearfix"></div></li>
            <li><p>房源价格</p><div class="search-chose-p"><i class="iconfont icon-paixujiantoushang shang"></i><i class="iconfont icon-xiala xia"></i><div class="clearfix"></div></div><div class="clearfix"></div></li>
            <li><p>房源面积</p><div class="search-chose-p"><i class="iconfont icon-paixujiantoushang shang"></i><i class="iconfont icon-xiala xia"></i><div class="clearfix"></div></div><div class="clearfix"></div></li>
            <div class="clearfix"></div>
        </ul>
    </div>
    <div class="search-content-list map-cont">
        <div class="tab-main-pic-main">
            <div class="tab-main-pic">
                <img src="img/news-banner1.jpg">
            </div>
            <div class="bottom-inform-img">
                <img src="img/picd.jpg">
            </div>
            <div class="bottom-inform-pic">
                123万
            </div>
            <div class="bottom-inform-i">
                <i class="iconfont icon-shafa shafa"></i><span>3</span>
                <i class="iconfont icon-zhinengchuang-f chuang"></i><span>2</span>
                <i class="iconfont icon-shuilongtouhuasaanzhuang huasa"></i><span>2</span>
                <i class="iconfont icon-guo guo"></i><span>1</span>
                <div class="clearfix"></div>
            </div>

        </div>
        <div class="tab-main-pic-main">
            <div class="tab-main-pic">
                <img src="img/news-banner1.jpg">
            </div>
            <div class="bottom-inform-img">
                <img src="img/picd.jpg">
            </div>
            <div class="bottom-inform-pic">
                123万
            </div>
            <div class="bottom-inform-i">
                <i class="iconfont icon-shafa shafa"></i><span>3</span>
                <i class="iconfont icon-zhinengchuang-f chuang"></i><span>2</span>
                <i class="iconfont icon-shuilongtouhuasaanzhuang huasa"></i><span>2</span>
                <i class="iconfont icon-guo guo"></i><span>1</span>
                <div class="clearfix"></div>
            </div>

        </div>
        <div class="tab-main-pic-main">
            <div class="tab-main-pic">
                <img src="img/news-banner1.jpg">
            </div>
            <div class="bottom-inform-img">
                <img src="img/picd.jpg">
            </div>
            <div class="bottom-inform-pic">
                123万
            </div>
            <div class="bottom-inform-i">
                <i class="iconfont icon-shafa shafa"></i><span>3</span>
                <i class="iconfont icon-zhinengchuang-f chuang"></i><span>2</span>
                <i class="iconfont icon-shuilongtouhuasaanzhuang huasa"></i><span>2</span>
                <i class="iconfont icon-guo guo"></i><span>1</span>
                <div class="clearfix"></div>
            </div>

        </div>
        <div class="tab-main-pic-main">
            <div class="tab-main-pic">
                <img src="img/news-banner1.jpg">
            </div>
            <div class="bottom-inform-img">
                <img src="img/picd.jpg">
            </div>
            <div class="bottom-inform-pic">
                123万
            </div>
            <div class="bottom-inform-i">
                <i class="iconfont icon-shafa shafa"></i><span>3</span>
                <i class="iconfont icon-zhinengchuang-f chuang"></i><span>2</span>
                <i class="iconfont icon-shuilongtouhuasaanzhuang huasa"></i><span>2</span>
                <i class="iconfont icon-guo guo"></i><span>1</span>
                <div class="clearfix"></div>
            </div>

        </div>
    </div>
</div>